version: "3.8"

services:
  frontend:
    image: dprxrx/error-archive-frontend:2.0   # â† í”„ë¡ íŠ¸ ì´ë¯¸ì§€
    container_name: error-archive-frontend
    ports:
      - "8080:80"   # ì™¸ë¶€ : ë‚´ë¶€(Nginx)
    depends_on:
      - backend
    networks:
      - error-archive-net

  backend:
    image: dprxrx/error-archive-backend:2.0    # â† ë°±ì—”ë“œ ì´ë¯¸ì§€
    container_name: error-archive-backend
    environment:
      - PORT=3000

      # ğŸ”¥ MongoDB Atlas ì—°ê²°
      - MONGO_URI=mongodb+srv://errorAdmin:pass123%23@errorarchive.bjd5r0c.mongodb.net/errorArch?retryWrites=true&w=majority

      # ğŸ”¥ í”„ë¡ íŠ¸ì—ì„œ ë¡œê·¸ì¸ ë¦¬ë””ë ‰ì…˜
      - PUBLIC_IP=http://192.168.56.101:8080   # â† VM í™˜ê²½ ê¸°ì¤€ (í”„ë¡ íŠ¸ ì£¼ì†Œ)

      # ğŸ”¥ JWT Secret
      - JWT_SECRET=k8spass#jwt

      # ğŸ”¥ ì†Œì…œë¡œê·¸ì¸ (í˜„ í™˜ê²½ì—ì„œ í•„ìš”í•˜ë©´ ì…ë ¥)
      - KAKAO_CLIENT_ID=your-kakao-id
      - KAKAO_CLIENT_SECRET=your-kakao-secret
      - NAVER_CLIENT_ID=your-naver-id
      - NAVER_CLIENT_SECRET=your-naver-secret
    ports:
      - "3000:3000"  # ì™¸ë¶€ì—ì„œë„ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ë„ë¡ ì˜¤í”ˆ
    networks:
      - error-archive-net

networks:
  error-archive-net:

